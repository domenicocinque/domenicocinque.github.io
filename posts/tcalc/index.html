<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>tcalc</title>
        <style>
            :root {
                color-scheme: dark;
                --bg: #17181f;
                --panel: #23242d;
                --accent: #c52700;
                --text: #f2f2f2;
                --muted: #9aa0a6;
            }

            * {
                box-sizing: border-box;
            }

            body {
                margin: 0;
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                background: radial-gradient(
                    circle at top,
                    #20222b 0%,
                    var(--bg) 55%,
                    #111218 100%
                );
                font-family: monospace;
                color: var(--text);
                letter-spacing: 0.04em;
            }

            main {
                width: min(480px, 90vw);
                background: var(--panel);
                border: 2px solid #2f303a;
                box-shadow: 0 12px 24px rgba(0, 0, 0, 0.35);
                padding: 2.5rem 2rem;
                display: flex;
                flex-direction: column;
                gap: 1.25rem;
            }

            h1 {
                font-size: 2.5rem;
                margin: 0;
                text-align: center;
                text-transform: lowercase;
            }

            h1 span {
                color: var(--accent);
            }

            p {
                margin: 0;
                text-align: center;
                color: var(--muted);
                font-size: 0.9rem;
            }

            textarea {
                width: 100%;
                height: 3rem;
                padding: 0.75rem 1rem;
                background: #1b1c24;
                border: 1px solid #3b3c47;
                border-radius: 4px;
                color: var(--text);
                font-family: inherit;
                font-size: 1rem;
                resize: vertical;
            }

            textarea:focus {
                outline: 2px solid var(--accent);
            }

            button {
                align-self: center;
                margin-top: 0.5rem;
                padding: 0.6rem 2.2rem;
                background: var(--accent);
                color: var(--text);
                border: none;
                border-radius: 4px;
                font-weight: bold;
                text-transform: uppercase;
                letter-spacing: 0.08em;
                cursor: pointer;
                transition:
                    transform 120ms ease,
                    box-shadow 120ms ease;
            }

            button:hover {
                transform: translateY(-1px);
                box-shadow: 0 6px 14px rgba(0, 0, 0, 0.35);
            }

            button:active {
                transform: translateY(0);
                box-shadow: none;
            }

            pre {
                background: #111218;
                border: 1px solid #2c2e37;
                padding: 1.25rem;
                min-height: 6rem;
                margin: 0;
                color: var(--text);
                font-size: 0.95rem;
                line-height: 1.4;
                overflow-x: auto;
                white-space: pre-wrap;
            }
        </style>
    </head>
    <body>
        <main>
            <h1>
                <em><span>t</span>calc</em>
            </h1>
            <p>
                arithmetics with time
            </p>
                <textarea
                    id="input"
                    placeholder="e.g., now + 2 days"
                ></textarea>
                <button id="run">Run</button>
            </p>

            <pre id="output"></pre>
        </main>

        <script type="module">
            import init, { init_panic_hook, run_web } from "./tcalc/web.js";

            async function main() {
                await init();
                init_panic_hook();
                const btn = document.getElementById("run");
                const input = document.getElementById("input");
                const output = document.getElementById("output");

                btn.onclick = () => {
                    try {
                        const result = run_web(input.value);
                        output.textContent = result;
                    } catch (e) {
                        output.textContent = `Error: ${e}`;
                    }
                };
            }

            main();
        </script>
    </body>
</html>
